# django_329
Учебный проект Django с группой python329

## Lesson 54

- Создан репозиторий django_329
- Создано виртуальное окружение `python -m venv venv`
- Активировано виртуальное окружение `venv\Scripts\activate`
- Установлен Django 4.2
- Создан проект anki `django-admin startproject anki .` (точка в конце команды создает проект в текущей директории)
- Создана ветка `develop` и переключен на нее
- Создан приложение `cards` команда `python manage.py startapp cards`
- Подключен `cards` в `settings.py`
- Создано первое представление `index` в `views.py` в приложении `cards`
- Создан url для `index` в  `aniki` в `urls.py`
- Получили свой первый `HttpResponse` в браузере "Hello, World!"
- Для того чтобы убрать ошибки импорта в `urls.py` ищем в какой папке `manage.py` и Отмечаем ее как `source root` в PyCharm
- В приложении `cards` создан файл `urls.py` и подключен в `aniki` в `urls.py` через функцию `include`
- Протестирован маршрут `cards/catalog/` и получен ответ Каталог карточек
- Созданы маршрут `cards.urls` и представление `cards/catalog/<int:card_id>/` которое позволяет делать GET запросы к карточке по id
- Созданы маршрут в `cards.urls` и  `catalog/<slug:slug>/` и представление `get_category_by_name` которое позволяет делать GET запросы к карточке по slug
- Созданы тесты для представлений `cards` в `tests.py` в приложении `cards` (для запуска тестов используем команду `python manage.py test cards`)


## Lesson 55
Решено остановиться на следующей версии маршрутов:

### Главная страница и меню
1. **Главная страница**: `/` - главная страница сайта с общей информацией и ссылками на различные разделы.
2. **О проекте**: `/about/` - страница с информацией о проекте, его целях и создателях.


### Пользователи `/users/`

1. **Регистрация пользователя**: `/users/register/` - страница для регистрации новых пользователей.
2. **Авторизация пользователя**: `/users/login/` - страница для входа в систему существующих пользователей через email и пароль или через ВКонтакте.
3. **Восстановление доступа (сброс пароля)**: `/users/password_reset/` - начало процесса восстановления доступа, включая ввод email для отправки инструкций по сбросу пароля.
4. **Смена пароля**: `/users/password_change/` - страница для смены пароля авторизованным пользователями.
5. **Личный кабинет пользователя**: `/users/profile/<user_id>/` - страница личного кабинета пользователя, где он может повторять карточки и настраивать свой профиль.
6. **Просмотр профиля другого пользователя**: `/users/profile/<user_id>/view` - страница для просмотра профилей других пользователей с информацией о добавленных карточках и основных данных пользователя.

### Карточки `/cards/`
1. **Каталог карточек**: `/cards/catalog/` - страница со списком всех карточек.
2. **Категории карточек**: `/cards/categories/` - страница со списком категорий карточек.
3. **Карточки по категории**: `/cards/categories/<category_slug>/` - отображение карточек определенной категории.
4. **Теги карточек**: `/cards/tags/<tag_slug>/` - отображение карточек, отмеченных определенным тегом.
5. **Детальная информация по карточке**: `/cards/<kart_id>/detail/` - страница с подробной информацией о карточке, включая комментарии и возможность добавления в избранное.

### Разделение

Разделение URL для личного кабинета пользователя и просмотра профилей других пользователей не обязательно, и выбор структуры URL зависит от конкретных требований и предпочтений разработки вашего приложения. Однако, есть несколько соображений, которые могут помочь вам принять решение:

### Единый URL для Профилей
Использование единого URL для обоих действий, например, `/users/profile/<user_id>/`, может упростить структуру URL и сделать систему маршрутизации менее запутанной. В этом случае, логика определения, показывать ли интерфейс редактирования профиля или только страницу просмотра, может быть реализована на уровне контроллера или представления в зависимости от того, соответствует ли `user_id` текущему авторизованному пользователю.

**Преимущества**:
- Упрощенная структура URL.
- Меньше дублирования в маршрутизации и шаблонах.

**Недостатки**:
- Необходима дополнительная логика в представлениях для разграничения доступа и функционала.

### Раздельные URL для Разных Действий
Предоставление разных URL для просмотра и редактирования профиля, как вы предложили (`/users/profile/<user_id>/` для личного кабинета и `/users/profile/<user_id>/view` для просмотра других профилей), может облегчить разграничение доступа и ясно отделять функционал между разными видами пользовательских взаимодействий.

**Преимущества**:
- Четкое разделение функционала и доступа.
- Более очевидная структура URL для разработчиков и возможно для пользователей.

**Недостатки**:
- Необходимость поддерживать более сложную структуру маршрутизации.
- Возможное дублирование кода для похожих представлений и шаблонов.

### Рекомендация
Решение о структуре URL должно базироваться на вашей целевой аудитории, общей архитектуре приложения и предпочтениях в удобстве разработки и поддержке. Если ваше приложение стремится к максимальной прозрачности и простоте для пользователя, единый URL может быть лучшим выбором. Однако, если для вас важнее четкое разделение функционала и управления доступом, раздельные URL могут обеспечить более строгую организацию.

В любом случае, важно тщательно продумать систему прав и доступов, чтобы избежать утечки личной информации и несанкционированного доступа к функциям редактирования профиля.

## Lesson 56
- Изучали шаблоны
- Был сделан базовый шаблон
- Передача данных в шаблон через контекст
- Было рассмотрено наследование шаблонов через `{% block %}` и `include`
- Доступность переменных в наследуемых шаблонах
- Подключение статических файлов
- Шаблонный тег для подключения статических файлов `{% load static %}` и использование `{% static 'path' %}`

## Домашнее задание к уроку 56: №36

Разработать структуру шаблонов для Django-приложения, включая базовый шаблон и наследуемые от него шаблоны для главной 
страницы, страницы "О проекте", каталога карточек и детального представления карточки. 
Необходимо обеспечить подключение статики, создание кликабельного меню и отображение карточек.

### Шаблоны
`root/templates/base.html`
`root/templates/main.html`
`root/templates/about.html`
`cards/templates/cards/catalog.html`
`cards/templates/cards/card_detail.html`
`cards/templates/cards/card_detail.html`
`root/templates/include/menu.html`

```python
# Пример данных для карточек  
cards_dataset = [  
    {        "question": "Что такое PEP 8?",  
        "answer": "PEP 8 — стандарт написания кода на Python.",  
        "category": "Стандарты кода",  
        "tags": ["PEP 8", "стиль", "форматирование"],  
        "id_author": 1,
        "id_card": 1,  
        "upload_date": "2023-01-15",  
        "views_count": 100,  
        "favorites_count": 25  
    },
```
## Lesson 57:
- Разбор домашнего задания
- Создание пользователького тега шаблонов
- Знакомство с Django ORM
- Создание первой модели `Card` и миграция

## Lesson 58:
- Работа с миграциями
- Команда `python manage.py makemigrations` создает файл миграции
- Команда `python manage.py migrate` применяет миграции
- Команда `python manage.py sqlmigrate cards 0001` показывает SQL код миграции
- Команда `python manage.py showmigrations` показывает статус миграций
- Команда `python manage.py migrate cards zero` откатывает все миграции
- Команда `python manage.py migrate cards 0001` откатывает миграцию до определенной

### Shell plus
- `pip install ipython django-extensions` установка пакетов для работы с Django shell plus
- Добавьте `django_extensions` в список `INSTALLED_APPS` в вашем файле `settings.py`
- `python manage.py shell_plus` запуск Django shell plus
- `python manage.py shell_plus --print-sql` показывает SQL запросы

### Добавили первое представление из БД
cards/<int:card_id>/detail/
Добавили `get_object_or_404` для обработки ошибок 404

### Представление, которое обрабатывает `get` запросы (экспериментальный catalog2)
- Создаем новый маршрут `catalog2` в `cards.urls`
- path('catalog2/', views.catalog2, name='catalog2')
- Создаем новое представление `catalog2` в `views.py`
- Добавляем в `catalog2` обработку `get` запросов